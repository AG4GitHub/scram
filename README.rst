####################
SCRAM Website Source
####################

.. image:: https://travis-ci.org/rakhimov/scram.svg?branch=gh-source
    :target: https://travis-ci.org/rakhimov/scram

|

The three branch system is used to build the website:

    **develop** -> **gh-source** -> **gh-pages**

This branch contains source files
for building SCRAM's website and API documentation.
This **gh-source** branch is synchronized with the **develop** branch
to get the current documentation files and source code of SCRAM.
No other files are needed,
for example, tests, input files, and shared files must be removed.
After building the website and API documentation,
they are uploaded to the **gh-pages** branch.

Example merging steps with the **develop** branch:

    #. Run 'git merge develop'. Conflicts are expected.
    #. Delete with ``git rm`` any new file that is not in ``doc/``, ``src/``
    #. Solve the other merge conflicts. (``README.rst``, for example)
    #. Finish merging.


Building
========

A list of dependencies:

================   ==================
Package            Minimum Version
================   ==================
Sphinx             1.4.3
sphinx_rtd_theme   0.1.8
LaTeX
doxygen            1.8.12
Graphviz Dot       2.26.3
Lizard             1.12
cppdep             0.0.7
================   =================

.. warning::

    Before running the build commands,
    clean the directories from
    autogenerated or other irrelevant files.
    One option is to use Git: ``git clean -fd``

Update and configure ``source/conf.py`` as necessary.
Configure ``doxygen.conf`` if needed.
The command to build the API documentation.

.. code-block:: bash

    make doxygen

The command to build the website.

.. code-block:: bash

    make html

The results are located in ``build/html``.
The generated files should be transferred to the **gh-pages** branch.

Follow the instructions in ``publish/README.rst``
for the final publishing steps.
